
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A cloud-native platform to control data usage">
      
      
      
      <link rel="icon" href="../../static/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>IT Config Policies and Data Plane Optimization - Fybrik</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#it-config-policies-and-data-plane-optimization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fybrik" class="md-header__button md-logo" aria-label="Fybrik" data-md-component="logo">
      
  <img src="../../static/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fybrik
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IT Config Policies and Data Plane Optimization
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fybrik/fybrik" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    fybrik/fybrik
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      About
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../get-started/quickstart/" class="md-tabs__link">
        Get Started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../introduction/" class="md-tabs__link md-tabs__link--active">
        Concepts
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tasks/control-plane-security/" class="md-tabs__link">
        Tasks
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/crds/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contribute/" class="md-tabs__link">
        Contribute
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../publications/" class="md-tabs__link">
      Publications
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fybrik" class="md-nav__button md-logo" aria-label="Fybrik" data-md-component="logo">
      
  <img src="../../static/logo.png" alt="logo">

    </a>
    Fybrik
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fybrik/fybrik" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    fybrik/fybrik
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Get Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Get Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Get Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Notebook samples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notebook samples" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Notebook samples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/pre-steps/" class="md-nav__link">
        Before we begin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/notebook-read/" class="md-nav__link">
        Notebook sample for the read flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/notebook-write/" class="md-nav__link">
        Notebook sample for the write flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/delete-sample/" class="md-nav__link">
        Sample for the delete flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/chaining-sample/" class="md-nav__link">
        Chaining sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/cleanup/" class="md-nav__link">
        Cleanup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/OneClickDemo/" class="md-nav__link">
        One Click Demo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../taxonomy/" class="md-nav__link">
        Taxonomy
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../connectors/" class="md-nav__link">
        Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../storage_manager/" class="md-nav__link">
        Storage manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vault_plugins/" class="md-nav__link">
        HashiCorp Vault plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          IT Config Policies and Data Plane Optimization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        IT Config Policies and Data Plane Optimization
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-it-config-policies" class="md-nav__link">
    What are IT config policies?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-to-policies" class="md-nav__link">
    Input to policies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#out-of-the-box-policies" class="md-nav__link">
    Out of the box policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extended-policies" class="md-nav__link">
    Extended policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-provide-custom-policies" class="md-nav__link">
    How to provide custom policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-add-start-andor-expiry-dates-to-policies" class="md-nav__link">
    How to add start and/or expiry dates to policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-update-policies-after-fybrik-is-already-deployed" class="md-nav__link">
    How to update policies after Fybrik is already deployed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimization-goals" class="md-nav__link">
    Optimization goals
  </a>
  
    <nav class="md-nav" aria-label="Optimization goals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#syntax_1" class="md-nav__link">
    Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weights" class="md-nav__link">
    Weights
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer/" class="md-nav__link">
        Optimizer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tasks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tasks" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tasks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/control-plane-security/" class="md-nav__link">
        Enable Control Plane Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/using-opa/" class="md-nav__link">
        Using OPA for Data Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/multicluster/" class="md-nav__link">
        Multicluster setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/custom-taxonomy/" class="md-nav__link">
        Using a Custom Taxonomy for Resource Validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/performance/" class="md-nav__link">
        Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/high-availability/" class="md-nav__link">
        High Availability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/infrastructure/" class="md-nav__link">
        Infrastructure attributes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/data-plane-optimization/" class="md-nav__link">
        Enabling data-plane optimization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/add-vault-plugin/" class="md-nav__link">
        Adding a new HashiCorp Vault Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/omd-discover-s3-asset/" class="md-nav__link">
        Discovering an S3 asset through the OpenMetadata UI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/crds/" class="md-nav__link">
        API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Connectors API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Connectors API" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Connectors API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/connectors-datacatalog/" class="md-nav__link">
        Data catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/connectors-policymanager/" class="md-nav__link">
        Policy manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/connectors-storagemanager/" class="md-nav__link">
        Storage manager API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Components" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ddc/" class="md-nav__link">
        Data Distribution Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/katalog/" class="md-nav__link">
        Katalog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Contribute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/environment/" class="md-nav__link">
        Development Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/build-test/" class="md-nav__link">
        Build and Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/flow/" class="md-nav__link">
        GitHub Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" type="checkbox" id="__nav_6_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_6">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/" class="md-nav__link">
        Contribute Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/formatting/" class="md-nav__link">
        Formatting Standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/style/" class="md-nav__link">
        Style Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_7" type="checkbox" id="__nav_6_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_7">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_7">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/modules/" class="md-nav__link">
        Module Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/openapi/" class="md-nav__link">
        Using OpenAPI Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-it-config-policies" class="md-nav__link">
    What are IT config policies?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-to-policies" class="md-nav__link">
    Input to policies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax" class="md-nav__link">
    Syntax
  </a>
  
    <nav class="md-nav" aria-label="Syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#out-of-the-box-policies" class="md-nav__link">
    Out of the box policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extended-policies" class="md-nav__link">
    Extended policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-provide-custom-policies" class="md-nav__link">
    How to provide custom policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-add-start-andor-expiry-dates-to-policies" class="md-nav__link">
    How to add start and/or expiry dates to policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-update-policies-after-fybrik-is-already-deployed" class="md-nav__link">
    How to update policies after Fybrik is already deployed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimization-goals" class="md-nav__link">
    Optimization goals
  </a>
  
    <nav class="md-nav" aria-label="Optimization goals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#syntax_1" class="md-nav__link">
    Syntax
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#weights" class="md-nav__link">
    Weights
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/fybrik/fybrik/edit/master/site/docs/concepts/config-policies.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="it-config-policies-and-data-plane-optimization">IT Config Policies and Data Plane Optimization</h1>
<h2 id="what-are-it-config-policies">What are IT config policies?</h2>
<p>IT config policies are the mechanism via which the organization may influence the construction of the data plane, taking into account infrastructure capabilities and costs. Fybrik takes into account the workload context, the data metadata, the data governance policies and the configuration policies when defining the data plane. IT config policies influence what capabilities should be deployed (e.g. read, copy), in which clusters they should be deployed, and the selection of the most appropriate module that implements the capability.</p>
<h2 id="input-to-policies">Input to policies</h2>
<p>The <code>input</code> object includes general application data such as workload cluster and application properties, as well as dataset details (user requirements, metadata).</p>
<p>Available properties:</p>
<ul>
<li><code>cluster.name</code>: name of the workload cluster</li>
<li><code>cluster.metadata.region</code>: region of the workload cluster</li>
<li><code>properties</code>: application/workload properties defined in FybrikApplication, e.g. <code>properties.intent</code></li>
<li><code>request.metadata</code>: asset metadata as defined in catalog taxonomy, e.g <code>request.metadata.geography</code></li>
<li><code>usage</code>: a set of boolean properties associated with data use: <code>usage.read</code>, <code>usage.write</code>, <code>usage.copy</code></li>
</ul>
<h2 id="syntax">Syntax</h2>
<p>Policies are written in rego files. Each file declares a package <code>adminconfig</code>.</p>
<p>Rules are written in the following syntax: <code>config[{"capability": capability, "decision": decision}]</code> where -</p>
<p><code>capability</code> represents a required module capability, such as "read", "write", "transform" and "copy".</p>
<p><code>decision</code> is a JSON structure that matches <code>Decision</code> defined above. </p>
<p><div class="highlight"><pre><span></span><code>{ 
    &quot;policy&quot;: {&quot;ID&quot;: &lt;id&gt;, &quot;description&quot;: &lt;description&gt;, &quot;version&quot;: &lt;version&gt;}, 
    &quot;deploy&quot;: &lt;&quot;True&quot;, &quot;False&quot;&gt;,
    &quot;restrictions&quot;: {
        &quot;modules&quot;: &lt;list of restrictions&gt;,
        &quot;clusters&quot;: &lt;list of restrictions&gt;,
        &quot;storageaccounts&quot;: &lt;list of restrictions&gt;,
    },
}
</code></pre></div>
<code>restriction</code> restricts a <code>property</code> to either a set of <code>values</code> or a value in a given <code>range</code>.</p>
<p>For example, the policy above restricts the choice of clusters and modules for a read capability by narrowing the choice of deployment clusters to the workload cluster, and restricting the module type to service.</p>
<div class="highlight"><pre><span></span><code>config[{&quot;capability&quot;: &quot;read&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;read-location&quot;, &quot;description&quot;:&quot;Deploy read in the workload cluster&quot;, &quot;version&quot;: &quot;0.1&quot;}
    cluster_restrict := {&quot;property&quot;: &quot;name&quot;, &quot;values&quot;: [ input.workload.cluster.name ] }
    module_restrict := {&quot;property&quot;: &quot;type&quot;, &quot;values&quot;: [&quot;service&quot;]}
    decision := {&quot;policy&quot;: policy, &quot;restrictions&quot;: {&quot;clusters&quot;: [cluster_restrict], &quot;modules&quot;: [module_restrict]}}
}
</code></pre></div>
<p><code>policy</code> provides policy metadata: unique ID, human-readable description and version</p>
<p><code>restrictions</code> provides restrictions for <code>modules</code>, <code>clusters</code> and <code>storageaccounts</code>.
Each restriction provides a list or a range of allowed values for a property of module/cluster/storageaccount object. For example, to restrict a module type to either "service" or "plugin", we'll use "type" as a property, and [ "service","plugin ] as a list of allowed values.
Properties of a module can be found inside <a href="../../reference/crds/#fybrikmodule"><code>FybrikModule</code></a> Spec.</p>
<p>Properties of a storage account are listed inside <a href="../../reference/crds/#appfybrikiov1beta2"><code>FybrikStorageAccount</code></a>.  </p>
<p>Cluster is not a custom resource. It has the following properties:</p>
<ul>
<li>name: cluster name</li>
<li>metadata.region: cluster region</li>
<li>metadata.zone: cluster zone</li>
</ul>
<p><code>deploy</code> receives "True"/"False" values. These values indicate whether the capability should or should not be deployed. If not specified in the policy, it's up to Fybrik to decide on the capability deployment.</p>
<h3 id="out-of-the-box-policies">Out of the box policies</h3>
<p>Out of the box policies come with the fybrik deployment. They define the deployment of basic capabilities, such as read, write, copy and delete. </p>
<div class="highlight"><pre><span></span><code>package adminconfig

# read capability deployment
config[{&quot;capability&quot;: &quot;read&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;read-default-enabled&quot;, &quot;description&quot;:&quot;Read capability is requested for read workloads&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;True&quot;}
}

# write capability deployment
config[{&quot;capability&quot;: &quot;write&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;write&quot;
    policy := {&quot;ID&quot;: &quot;write-default-enabled&quot;, &quot;description&quot;:&quot;Write capability is requested for workloads that write data&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;True&quot;}
}

# copy requested by the user
config[{&quot;capability&quot;: &quot;copy&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;copy&quot;
    policy := {&quot;ID&quot;: &quot;copy-request&quot;, &quot;description&quot;:&quot;Copy (ingest) capability is requested by the user&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;True&quot;}
}

# delete capability deployment
config[{&quot;capability&quot;: &quot;delete&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;delete&quot;
    policy := {&quot;ID&quot;: &quot;delete-request&quot;, &quot;description&quot;:&quot;Delete capability is requested by the user&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;True&quot;}
}

# do not deploy copy in scenarios different from read or copy
config[{&quot;capability&quot;: &quot;copy&quot;, &quot;decision&quot;: decision}] {
    input.request.usage != &quot;read&quot;
    input.request.usage != &quot;copy&quot;
    policy := {&quot;ID&quot;: &quot;copy-disabled&quot;, &quot;description&quot;:&quot;Copy capability is not requested&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;False&quot;}
}

# do not deploy read in other scenarios
config[{&quot;capability&quot;: &quot;read&quot;, &quot;decision&quot;: decision}] {
    input.request.usage != &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;read-disabled&quot;, &quot;description&quot;:&quot;Read capability is not requested&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;False&quot;}
}

# do not deploy write in other scenarios
config[{&quot;capability&quot;: &quot;write&quot;, &quot;decision&quot;: decision}] {
    input.request.usage != &quot;write&quot;
    policy := {&quot;ID&quot;: &quot;write-disabled&quot;, &quot;description&quot;:&quot;Write capability is not requested&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;False&quot;}
}

# do not deploy delete in other scenarios
config[{&quot;capability&quot;: &quot;delete&quot;, &quot;decision&quot;: decision}] {
    input.request.usage != &quot;delete&quot;
    policy := {&quot;ID&quot;: &quot;delete-disabled&quot;, &quot;description&quot;:&quot;Delete capability is not requested&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;False&quot;}
}
</code></pre></div>
<h3 id="extended-policies">Extended policies</h3>
<p>The extended policies define advanced deployment requirements, such as where read or transform modules should run, what should be the scope of module deployments, and more. </p>
<p>The policies below are provided as a sample and can be updated for the production deployment.</p>
<div class="highlight"><pre><span></span><code>package adminconfig

# configure where transformations take place
config[{&quot;capability&quot;: &quot;transform&quot;, &quot;decision&quot;: decision}] {
    policy := {&quot;ID&quot;: &quot;transform-geo&quot;, &quot;description&quot;:&quot;Governance based transformations must take place in the geography where the data is stored&quot;, &quot;version&quot;: &quot;0.1&quot;}
    cluster_restrict := {&quot;property&quot;: &quot;metadata.region&quot;, &quot;values&quot;: [input.request.dataset.geography]}
    decision := {&quot;policy&quot;: policy, &quot;restrictions&quot;: {&quot;clusters&quot;: [cluster_restrict]}}
}

# configure the scope of the read capability
config[{&quot;capability&quot;: &quot;read&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;read-scope&quot;, &quot;description&quot;:&quot;Deploy read at the workload scope&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;restrictions&quot;: {&quot;modules&quot;: [{&quot;property&quot;: &quot;capabilities.scope&quot;, &quot;values&quot; : [&quot;workload&quot;]}]}}
}

# configure where the read capability will be deployed
config[{&quot;capability&quot;: &quot;read&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;read-location&quot;, &quot;description&quot;:&quot;Deploy read in the workload cluster&quot;, &quot;version&quot;: &quot;0.1&quot;}
    cluster_restrict := {&quot;property&quot;: &quot;name&quot;, &quot;values&quot;: [ input.workload.cluster.name ] }
    decision := {&quot;policy&quot;: policy, &quot;restrictions&quot;: {&quot;clusters&quot;: [cluster_restrict]}}
}

# allow implicit copies by default
config[{&quot;capability&quot;: &quot;copy&quot;, &quot;decision&quot;: decision}] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;copy-default&quot;, &quot;description&quot;:&quot;Implicit copies are allowed in read scenarios&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy}
}
</code></pre></div>
<h3 id="how-to-provide-custom-policies">How to provide custom policies</h3>
<p>In order to deploy Fybrik with customized policies, perform the following steps:</p>
<ol>
<li>Clone the github repository of Fybrik for the required release: <code>git clone -b releases/&lt;version&gt; https://github.com/fybrik/fybrik.git</code></li>
<li>Copy the rego files containing customized policies to fybrik/charts/fybrik/files/adminconfig/ folder. </li>
<li>Install Fybrik:
<div class="highlight"><pre><span></span><code>cd fybrik
helm install fybrik-crd charts/fybrik-crd -n fybrik-system --wait
helm install fybrik charts/fybrik --set global.tag=master --set global.imagePullPolicy=Always -n fybrik-system --wait
</code></pre></div></li>
</ol>
<h3 id="how-to-add-start-andor-expiry-dates-to-policies">How to add start and/or expiry dates to policies</h3>
<p>By utilizing the time built-in functions of OPA, an effective date and/or expiry date of a policy can be defined. The related built-in functions are:</p>
<p><div class="highlight"><pre><span></span><code>output := time.now_ns() //the current date
output := time.parse_rfc3339_ns(value) //the specified date in RFC3339 format
</code></pre></div>
<code>parse_rfc3339_ns</code> enables to add the expiry date as well as the the date for the policy to become effective, and <code>now_ns</code> captures the date when policies are applied. Through comparisons, it can be acquired whether the current policy is still valid. Below is an example.</p>
<p><div class="highlight"><pre><span></span><code>package adminconfig

# vaild from 2022.1.1, expire on 2022.6.1
config[{&quot;capability&quot;: &quot;copy&quot;, &quot;decision&quot;: decision}] {
    policy := {&quot;ID&quot;: &quot;test-1&quot;, &quot;description&quot;: &quot;forbid making copies&quot;, &quot;version&quot;: &quot;0.1&quot;}
    nowDate := time.now_ns()
    startDate := time.parse_rfc3339_ns(&quot;2022-01-01T00:00:00Z&quot;)
    expiration := time.parse_rfc3339_ns(&quot;2022-06-01T00:00:00Z&quot;)
    nowDate &gt;= startDate
    nowDate &lt; expiration
    decision := {&quot;policy&quot;: policy, &quot;deploy&quot;: &quot;False&quot;}
}
</code></pre></div>
Note that an empty <code>ConfigDecisions</code> map will be returned if the expiration date is exceeded by the time when the policy is applied. </p>
<h3 id="how-to-update-policies-after-fybrik-is-already-deployed">How to update policies after Fybrik is already deployed</h3>
<p>Updating policies is done by updating <code>fybrik-adminconfig</code> config map in the controller plane.</p>
<p>To do that, first, download all files to some directory, e.g. /tmp/adminconfig, after that update the files, and finally, upload them to the config map. The steps below demonstrate how to add a new rego file <code>samples/adminconfig/quickstart-policies.rego</code>. </p>
<div class="highlight"><pre><span></span><code>#!/bin/bash
kubectl get cm fybrik-adminconfig -o json &gt; tmp.json
mkdir -p /tmp/adminconfig
files=$(cat tmp.json | jq &#39;.data&#39; | jq -r &#39;keys[]&#39;)
for k in $files; do
    name=&quot;.data[\&quot;$k\&quot;]&quot;;
    cat tmp.json | jq -r $name &gt; /tmp/adminconfig/$k;
done
cp samples/adminconfig/quickstart_policies.rego /tmp/adminconfig/
kubectl create configmap fybrik-adminconfig --from-file=/tmp/adminconfig -o yaml --dry-run=client | kubectl replace -n fybrik-system -f -
rm -rf /tmp/adminconfig
rm -rf tmp.json
</code></pre></div>
<h2 id="optimization-goals">Optimization goals</h2>
<p>In a typical Fybrik deployment there may be several possibilities to create a data plane that satisfies the user requirements, governance and configuration policies. Based on the enterprise policy, an IT administrator may affect the choice of the data plane by defining a policy with optimization goals. 
An optimization goal attempts to minimize or maximize a specific <a href="../../tasks/infrastructure/#how-to-define-infrastructure-attributes">infrastructure attribute</a>.
While <a href="#what-are-it-config-policies">IT config policies</a> are always enforced, the data plane optimization is disabled by default. To enable data-plane optimization, the <a href="../optimizer/">Optimizer component</a> must be enabled as explained <a href="../../tasks/data-plane-optimization/#enabling-the-optimizer">here</a>. </p>
<h3 id="syntax_1">Syntax</h3>
<p>Optimization rules are written in rego files in a package <code>adminconfig</code>.</p>
<p>Rules are written in the following syntax: <code>optimize[decision]</code> where</p>
<ul>
<li><code>decision</code> is a JSON structure with the following fields:</li>
<li><code>policy</code> - policy metadata: unique ID, human-readable description and a version.</li>
<li>list of <code>goals</code> including attribute name, optimization directive(<code>min</code> or <code>max</code>) and optionally a weight.</li>
</ul>
<p>For example, the following rule attempts to minimize storage cost in copy scenarios.</p>
<div class="highlight"><pre><span></span><code># minimize storage cost for copy scenarios
optimize[decision] {
    input.request.usage == &quot;copy&quot;
    policy := {&quot;ID&quot;: &quot;save-cost&quot;, &quot;description&quot;:&quot;Save storage costs&quot;, &quot;version&quot;: &quot;0.1&quot;}
    decision := {&quot;policy&quot;: policy, &quot;strategy&quot;: [{&quot;attribute&quot;: &quot;storage-cost&quot;, &quot;directive&quot;: &quot;min&quot;}]}
}
</code></pre></div>
<h3 id="weights">Weights</h3>
<p>If more than one goal is provided, they can have a different weight. By default, all weights are equal to 1. 
For example, the rule below defines two goals with weights in the 4:1 ratio meaning that the optimizer try to optimize distance and storage costs, but will give a higher priority to distance.
<div class="highlight"><pre><span></span><code># minimize distance, minimize storage cost for read scenarios
optimize[decision] {
    input.request.usage == &quot;read&quot;
    policy := {&quot;ID&quot;: &quot;general-strategy&quot;, &quot;description&quot;:&quot;focus on higher performance while saving storage costs&quot;, &quot;version&quot;: &quot;0.1&quot;}
    optimize_distance := {&quot;attribute&quot;: &quot;distance&quot;, &quot;directive&quot;: &quot;min&quot;, &quot;weight&quot;: &quot;0.8&quot;}
    optimize_storage := {&quot;attribute&quot;: &quot;storage-cost&quot;, &quot;directive&quot;: &quot;min&quot;, &quot;weight&quot;: &quot;0.2&quot;}
    decision := {&quot;policy&quot;: policy, &quot;strategy&quot;: [optimize_distance,optimize_storage]}
}
</code></pre></div></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../vault_plugins/" class="md-footer__link md-footer__link--prev" aria-label="Previous: HashiCorp Vault plugins" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              HashiCorp Vault plugins
            </div>
          </div>
        </a>
      
      
        
        <a href="../optimizer/" class="md-footer__link md-footer__link--next" aria-label="Next: Optimizer" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Optimizer
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Made with ❤️ by Fybrik contributors.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/fybrik/fybrik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>